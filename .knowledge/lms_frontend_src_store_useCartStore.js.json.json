{"is_source_file": true, "format": "JavaScript", "description": "This file defines a Zustand store for managing a shopping cart in a web application. It handles cart state for both guest users (stored in localStorage) and authenticated users (stored in a remote database via Supabase). The store includes functions to initialize carts, load cart data, merge guest cart into user cart, add/remove courses, and clear the cart.", "external_files": ["../supabase/client", "zustand", "zustand/middleware", "react-hot-toast", "nanoid"], "external_methods": ["supabase.from", "toast.success", "toast.error", "toast"], "published": ["useCartStore"], "classes": [], "methods": [{"name": "loadGuestCart()", "description": "Loads the guest cart from localStorage, returning an object with items array.", "scope": "", "scopeKind": ""}, {"name": "saveGuestCart(cart)", "description": "Saves the guest cart to localStorage.", "scope": "", "scopeKind": ""}, {"name": "getOrCreateUserCart(userId)", "description": "Fetches an existing active cart for a user or creates a new one in the database.", "scope": "", "scopeKind": ""}], "calls": ["supabase.from", "supabase.select", "supabase.insert", "supabase.delete", "toast.success", "toast.error", "loadGuestCart", "saveGuestCart", "getOrCreateUserCart", "set", "get"], "search-terms": ["zustand cart store", "guest cart", "user cart", "merge guest into user cart", "supabase cart management", "localStorage cart", "add course", "remove course", "clear cart"], "state": 2, "file_id": 16, "knowledge_revision": 75, "git_revision": "9aec6f4fe6bd026c142be0ffa5c3cea22a35f287", "revision_history": [{"34": ""}, {"75": "9aec6f4fe6bd026c142be0ffa5c3cea22a35f287"}], "ctags": [{"_type": "tag", "name": "GUEST_CART_KEY", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^const GUEST_CART_KEY = \"lms_guest_cart\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "cartId", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^  cartId: null, \\/\\/ user cart id if logged in$/", "language": "JavaScript", "kind": "property", "scope": "initialState", "scopeKind": "class"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^  error: null,$/", "language": "JavaScript", "kind": "property", "scope": "initialState", "scopeKind": "class"}, {"_type": "tag", "name": "getOrCreateUserCart", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^async function getOrCreateUserCart(userId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId)"}, {"_type": "tag", "name": "initialState", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^const initialState = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "initialized", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^  initialized: false,$/", "language": "JavaScript", "kind": "property", "scope": "initialState", "scopeKind": "class"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^  items: [], \\/\\/ [{ id, courseId, price, quantity }]$/", "language": "JavaScript", "kind": "property", "scope": "initialState", "scopeKind": "class"}, {"_type": "tag", "name": "loadGuestCart", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^function loadGuestCart() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "loading", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^  loading: false,$/", "language": "JavaScript", "kind": "property", "scope": "initialState", "scopeKind": "class"}, {"_type": "tag", "name": "saveGuestCart", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^function saveGuestCart(cart) {$/", "language": "JavaScript", "kind": "function", "signature": "(cart)"}, {"_type": "tag", "name": "useCartStore", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^export const useCartStore = create($/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^  userId: null,$/", "language": "JavaScript", "kind": "property", "scope": "initialState", "scopeKind": "class"}], "hash": "772ae384a3eaa2ba2fdf2d031ea198f6", "format-version": 4, "code-base-name": "lms_frontend", "filename": "lms_frontend/src/store/useCartStore.js", "fields": [{"name": "cartId: null, \\/\\/ user cart id if logged in", "scope": "initialState", "scopeKind": "class", "description": "unavailable"}, {"name": "error: null,", "scope": "initialState", "scopeKind": "class", "description": "unavailable"}, {"name": "initialized: false,", "scope": "initialState", "scopeKind": "class", "description": "unavailable"}, {"name": "items: [], \\/\\/ [{ id, courseId, price, quantity }]", "scope": "initialState", "scopeKind": "class", "description": "unavailable"}, {"name": "loading: false,", "scope": "initialState", "scopeKind": "class", "description": "unavailable"}, {"name": "userId: null,", "scope": "initialState", "scopeKind": "class", "description": "unavailable"}]}