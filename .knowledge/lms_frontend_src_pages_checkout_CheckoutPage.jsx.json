{"is_source_file": true, "format": "React JSX (JavaScript/TypeScript with React)", "description": "This file defines the CheckoutPage React component, managing the checkout process including user details, coupon application, order summary, payment simulation, and order creation in Supabase.", "external_files": ["../../components/UI/Toast", "../../supabase/client", "../../store/useAuthStore", "../../store/useCartStore", "react", "react-router-dom"], "external_methods": ["Toast.info", "Toast.success", "Toast.error", "useNavigate", "useAuthStore", "useCartStore", "supabase.from", "Link"], "published": ["CheckoutPage"], "classes": [], "methods": [{"name": "applyCoupon", "description": "Handles applying a coupon code and updating state accordingly."}, {"name": "validateBeforePay", "description": "Validates user input and cart state before processing payment."}, {"name": "simulatePayment", "description": "Simulates a payment process, mimicking interaction with a payment provider."}, {"name": "handleConfirmPayment", "description": "Manages the payment process, interacts with Supabase to create order, order_items, enrollments, and clears the cart upon success."}, {"name": "CheckoutPage()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["useEffect", "useMemo", "useState", "supabase.from", "navigate", "loadCartForUser", "clearCart", "Toast.info", "Toast.success", "Toast.error", "simulatePayment", "supabase.from('orders').insert", "supabase.from('order_items').insert", "supabase.from('enrollments').insert"], "search-terms": ["CheckoutPage", "simulatePayment", "supabase order transaction", "React checkout", "order creation"], "state": 2, "file_id": 32, "knowledge_revision": 143, "git_revision": "757513de4ffab148c07fc727eb725ec0ba70b3a6", "revision_history": [{"79": ""}, {"143": "757513de4ffab148c07fc727eb725ec0ba70b3a6"}], "ctags": [{"_type": "tag", "name": "CheckoutPage", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/pages/checkout/CheckoutPage.jsx", "pattern": "/^export default function CheckoutPage() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "coupon_code", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/pages/checkout/CheckoutPage.jsx", "pattern": "/^        coupon_code: couponApplied?.code || null,$/", "language": "JavaScript", "kind": "property", "scope": "CheckoutPage.orderPayload", "scopeKind": "class"}, {"_type": "tag", "name": "customer_email", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/pages/checkout/CheckoutPage.jsx", "pattern": "/^        customer_email: email,$/", "language": "JavaScript", "kind": "property", "scope": "CheckoutPage.orderPayload", "scopeKind": "class"}, {"_type": "tag", "name": "customer_name", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/pages/checkout/CheckoutPage.jsx", "pattern": "/^        customer_name: fullName,$/", "language": "JavaScript", "kind": "property", "scope": "CheckoutPage.orderPayload", "scopeKind": "class"}, {"_type": "tag", "name": "discount_amount", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/pages/checkout/CheckoutPage.jsx", "pattern": "/^        discount_amount: Number(discount.toFixed(2)),$/", "language": "JavaScript", "kind": "property", "scope": "CheckoutPage.orderPayload", "scopeKind": "class"}, {"_type": "tag", "name": "orderPayload", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/pages/checkout/CheckoutPage.jsx", "pattern": "/^      const orderPayload = {$/", "language": "JavaScript", "kind": "class", "scope": "CheckoutPage", "scopeKind": "class"}, {"_type": "tag", "name": "paid_at", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/pages/checkout/CheckoutPage.jsx", "pattern": "/^        paid_at: payment.paid_at,$/", "language": "JavaScript", "kind": "property", "scope": "CheckoutPage.orderPayload", "scopeKind": "class"}, {"_type": "tag", "name": "payment_method", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/pages/checkout/CheckoutPage.jsx", "pattern": "/^        payment_method: paymentMethod,$/", "language": "JavaScript", "kind": "property", "scope": "CheckoutPage.orderPayload", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/pages/checkout/CheckoutPage.jsx", "pattern": "/^        status: \"paid\",$/", "language": "JavaScript", "kind": "property", "scope": "CheckoutPage.orderPayload", "scopeKind": "class"}, {"_type": "tag", "name": "subtotal_amount", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/pages/checkout/CheckoutPage.jsx", "pattern": "/^        subtotal_amount: Number(subtotal.toFixed(2)),$/", "language": "JavaScript", "kind": "property", "scope": "CheckoutPage.orderPayload", "scopeKind": "class"}, {"_type": "tag", "name": "tax_amount", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/pages/checkout/CheckoutPage.jsx", "pattern": "/^        tax_amount: Number(tax.toFixed(2)),$/", "language": "JavaScript", "kind": "property", "scope": "CheckoutPage.orderPayload", "scopeKind": "class"}, {"_type": "tag", "name": "total_amount", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/pages/checkout/CheckoutPage.jsx", "pattern": "/^        total_amount: Number(total.toFixed(2)),$/", "language": "JavaScript", "kind": "property", "scope": "CheckoutPage.orderPayload", "scopeKind": "class"}, {"_type": "tag", "name": "transaction_id", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/pages/checkout/CheckoutPage.jsx", "pattern": "/^        transaction_id: txnId,$/", "language": "JavaScript", "kind": "property", "scope": "CheckoutPage.orderPayload", "scopeKind": "class"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/pages/checkout/CheckoutPage.jsx", "pattern": "/^        user_id: user.id,$/", "language": "JavaScript", "kind": "property", "scope": "CheckoutPage.orderPayload", "scopeKind": "class"}], "hash": "abcc13c218f4f7c1679daccf5ff3e8ba", "format-version": 4, "code-base-name": "lms_frontend", "filename": "lms_frontend/src/pages/checkout/CheckoutPage.jsx", "fields": [{"name": "coupon_code: couponApplied?.code || null,", "scope": "CheckoutPage.orderPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "customer_email: email,", "scope": "CheckoutPage.orderPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "customer_name: fullName,", "scope": "CheckoutPage.orderPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "discount_amount: Number(discount.toFixed(2)),", "scope": "CheckoutPage.orderPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "paid_at: payment.paid_at,", "scope": "CheckoutPage.orderPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "payment_method: paymentMethod,", "scope": "CheckoutPage.orderPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "status: \"paid\",", "scope": "CheckoutPage.orderPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "subtotal_amount: Number(subtotal.toFixed(2)),", "scope": "CheckoutPage.orderPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "tax_amount: Number(tax.toFixed(2)),", "scope": "CheckoutPage.orderPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "total_amount: Number(total.toFixed(2)),", "scope": "CheckoutPage.orderPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "transaction_id: txnId,", "scope": "CheckoutPage.orderPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "user_id: user.id,", "scope": "CheckoutPage.orderPayload", "scopeKind": "class", "description": "unavailable"}]}