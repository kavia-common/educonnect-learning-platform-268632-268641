{"is_source_file": true, "format": "JavaScript", "description": "This file defines a state management store for shopping cart functionality using Zustand. It manages guest and authenticated user carts, interacts with localStorage and Supabase backend, and provides methods for cart initialization, merging, addition, removal, and clearing of cart items.", "external_files": ["../supabase/client", "zustand", "zustand/middleware", "react-hot-toast", "nanoid"], "external_methods": ["supabase.from", "supabase.select", "supabase.insert", "supabase.delete", "toast", "nanoid"], "published": ["useCartStore"], "classes": [], "methods": [{"name": "loadGuestCart()", "description": "Loads the guest cart data from localStorage, parsing JSON and handling errors.", "scope": "", "scopeKind": ""}, {"name": "saveGuestCart(cart)", "description": "Saves the guest cart data to localStorage as a JSON string.", "scope": "", "scopeKind": ""}, {"name": "getOrCreateUserCart(userId)", "description": "Fetches an existing active cart for a given user ID from Supabase or creates a new one if none exists.", "scope": "", "scopeKind": ""}], "calls": ["localStorage.getItem", "localStorage.setItem", "supabase.from", "supabase.select", "supabase.insert", "supabase.delete", "toast.success", "toast.error", "nanoid"], "search-terms": ["useCartStore", "guest cart", "Supabase cart", "zustand store", "localStorage cart"], "state": 2, "file_id": 16, "knowledge_revision": 34, "git_revision": "", "ctags": [{"_type": "tag", "name": "GUEST_CART_KEY", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^const GUEST_CART_KEY = \"lms_guest_cart\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "cartId", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^  cartId: null, \\/\\/ user cart id if logged in$/", "language": "JavaScript", "kind": "property", "scope": "initialState", "scopeKind": "class"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^  error: null,$/", "language": "JavaScript", "kind": "property", "scope": "initialState", "scopeKind": "class"}, {"_type": "tag", "name": "getOrCreateUserCart", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^async function getOrCreateUserCart(userId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId)"}, {"_type": "tag", "name": "initialState", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^const initialState = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "initialized", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^  initialized: false,$/", "language": "JavaScript", "kind": "property", "scope": "initialState", "scopeKind": "class"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^  items: [], \\/\\/ [{ id, courseId, price, quantity }]$/", "language": "JavaScript", "kind": "property", "scope": "initialState", "scopeKind": "class"}, {"_type": "tag", "name": "loadGuestCart", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^function loadGuestCart() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "loading", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^  loading: false,$/", "language": "JavaScript", "kind": "property", "scope": "initialState", "scopeKind": "class"}, {"_type": "tag", "name": "saveGuestCart", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^function saveGuestCart(cart) {$/", "language": "JavaScript", "kind": "function", "signature": "(cart)"}, {"_type": "tag", "name": "useCartStore", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^export const useCartStore = create($/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/educonnect-learning-platform-268632-268641/lms_frontend/src/store/useCartStore.js", "pattern": "/^  userId: null,$/", "language": "JavaScript", "kind": "property", "scope": "initialState", "scopeKind": "class"}], "hash": "91e16a317b49dd35093322a42e3da351", "format-version": 4, "code-base-name": "lms_frontend", "filename": "lms_frontend/src/store/useCartStore.js", "fields": [{"name": "cartId: null, \\/\\/ user cart id if logged in", "scope": "initialState", "scopeKind": "class", "description": "unavailable"}, {"name": "error: null,", "scope": "initialState", "scopeKind": "class", "description": "unavailable"}, {"name": "initialized: false,", "scope": "initialState", "scopeKind": "class", "description": "unavailable"}, {"name": "items: [], \\/\\/ [{ id, courseId, price, quantity }]", "scope": "initialState", "scopeKind": "class", "description": "unavailable"}, {"name": "loading: false,", "scope": "initialState", "scopeKind": "class", "description": "unavailable"}, {"name": "userId: null,", "scope": "initialState", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"34": ""}]}